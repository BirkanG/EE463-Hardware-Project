Version 4
SHEET 1 4912 1324
WIRE 1360 -528 1360 -544
WIRE 1472 -528 1472 -544
WIRE 1360 -416 1360 -448
WIRE 1472 -416 1472 -448
WIRE 3104 -176 3104 -208
WIRE 1968 -144 1936 -144
WIRE 2096 -144 2048 -144
WIRE 2688 -128 2656 -128
WIRE 2848 -128 2768 -128
WIRE 2944 -128 2912 -128
WIRE 3040 -128 3024 -128
WIRE 368 -80 48 -80
WIRE 512 -80 368 -80
WIRE 608 -80 592 -80
WIRE 736 -80 688 -80
WIRE 928 -80 736 -80
WIRE 1488 -64 1104 -64
WIRE 1632 -32 1616 -32
WIRE 928 -16 928 -80
WIRE 2000 -16 2000 -32
WIRE 368 0 368 -80
WIRE 1616 0 1616 -32
WIRE 1616 0 1152 0
WIRE 1776 0 1616 0
WIRE 1936 0 1936 -144
WIRE 1936 0 1856 0
WIRE 1968 0 1936 0
WIRE 2720 0 2720 -16
WIRE 3104 0 3104 -80
WIRE 3200 0 3104 0
WIRE 3296 0 3296 -240
WIRE 3296 0 3200 0
WIRE 2096 16 2096 -144
WIRE 2096 16 2032 16
WIRE 2128 16 2096 16
WIRE 2528 16 2512 16
WIRE 2656 16 2656 -128
WIRE 2656 16 2592 16
WIRE 2688 16 2656 16
WIRE 3200 16 3200 0
WIRE 1968 32 1936 32
WIRE 2848 32 2848 -128
WIRE 2848 32 2752 32
WIRE 2880 32 2880 -240
WIRE 2880 32 2848 32
WIRE 2912 32 2912 -128
WIRE 2912 32 2880 32
WIRE 2688 48 2656 48
WIRE 1152 64 1152 0
WIRE 2000 64 2000 48
WIRE 2720 80 2720 64
WIRE 3104 80 3104 0
WIRE 736 112 736 -80
WIRE 1776 112 1696 112
WIRE 1936 112 1936 32
WIRE 1936 112 1856 112
WIRE 1696 128 1696 112
WIRE 2912 128 2912 32
WIRE 2944 128 2912 128
WIRE 3040 128 3024 128
WIRE 2560 144 2544 144
WIRE 2656 144 2656 48
WIRE 2656 144 2640 144
WIRE 2672 144 2656 144
WIRE 2848 144 2848 32
WIRE 2848 144 2752 144
WIRE 928 160 928 64
WIRE 1936 160 1936 112
WIRE 2656 160 2656 144
WIRE 3200 160 3200 80
WIRE 1152 176 1152 144
WIRE 48 192 48 -80
WIRE 1104 224 1104 -64
WIRE 1488 224 1488 -64
WIRE 1488 224 1104 224
WIRE 3104 224 3104 176
WIRE 1696 256 1696 208
WIRE 1936 256 1936 240
WIRE 2656 256 2656 240
WIRE 368 352 368 64
WIRE 736 352 736 176
WIRE 736 352 368 352
WIRE 928 352 928 240
WIRE 928 352 736 352
WIRE 368 368 368 352
WIRE 144 448 128 448
WIRE 320 448 304 448
WIRE 48 496 48 272
WIRE 368 496 368 464
WIRE 368 496 48 496
WIRE 48 608 48 496
FLAG 1472 -416 0
FLAG 1472 -544 5V
FLAG 48 608 0
FLAG 1152 176 0
FLAG 1616 -32 ACS712_VOUT
FLAG 1360 -416 0
FLAG 1360 -544 10V
FLAG 2000 64 0
FLAG 2000 -32 10V
FLAG 1696 256 0
FLAG 1936 256 0
FLAG 128 448 0
FLAG 2720 80 0
FLAG 2720 -16 10V
FLAG 2544 144 10V
FLAG 2656 256 0
FLAG 2512 16 0
FLAG 3200 160 0
FLAG 3104 224 0
FLAG 3104 -208 10V
FLAG 2128 16 PROPORTIONAL
FLAG 3296 -240 TRIANGLE_75kHz
FLAG 2880 -240 SQUARE_75kHz
SYMBOL nmos 320 368 R0
SYMATTR InstName M1
SYMATTR Value IRFZ46N
SYMBOL diode 384 64 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL ind 496 -64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 15µH
SYMBOL voltage 928 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 12
SYMBOL res 912 -32 R0
SYMATTR InstName R1
SYMATTR Value 0.05
SYMBOL res 704 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 0.1
SYMBOL voltage 1472 -544 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V13
SYMATTR Value 5V
SYMBOL cap 720 112 R0
SYMATTR InstName C4
SYMATTR Value 47µF
SYMATTR SpiceLine2 IC=12
SYMBOL bv 1152 48 R0
WINDOW 3 252 97 Right 2
SYMATTR Value V=2.5+0.083*I(R1)
SYMATTR InstName B1
SYMBOL voltage 48 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 20
SYMBOL voltage 1360 -544 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 10V
SYMBOL OpAmps\\AD824 2000 -48 R0
SYMATTR InstName U2
SYMBOL res 2064 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 8k
SYMBOL res 1872 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res 1872 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res 1952 256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R13
SYMATTR Value 8k
SYMBOL voltage 1696 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 3.3V
SYMBOL voltage 240 448 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 10 0 0 0 3us 13.33us)
SYMBOL res 320 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL OpAmps\\AD824 2720 -32 R0
SYMATTR InstName U1
SYMBOL res 2656 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 5k
SYMBOL res 2768 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 5k
SYMBOL res 2672 256 R180
WINDOW 0 37 62 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 5k
SYMBOL res 2784 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 4k
SYMBOL cap 2592 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1nF
SYMBOL npn 3040 80 R0
SYMATTR InstName Q1
SYMBOL pnp 3040 -80 M180
SYMATTR InstName Q2
SYMBOL res 3040 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 150k
SYMBOL res 3040 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 150k
SYMBOL cap 3184 16 R0
SYMATTR InstName C2
SYMATTR Value 5nF
SYMATTR SpiceLine2 IC=0
TEXT 1120 -48 Left 2 ;ACS712 MODEL
TEXT 1176 -96 Left 1 ;You may add low pass filter since\n this sensor has a bandwith of 50kHz
TEXT 14 632 Left 2 !.tran 5ms
